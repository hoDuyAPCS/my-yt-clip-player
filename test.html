<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Comparator</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .main-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button.compare {
            background-color: #27ae60;
        }
        
        button.compare:hover {
            background-color: #219653;
        }
        
        button.clear {
            background-color: #e74c3c;
        }
        
        button.clear:hover {
            background-color: #c0392b;
        }
        
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        
        .comparison-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 900px) {
            .comparison-area {
                grid-template-columns: 1fr;
            }
        }
        
        .json-section {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .section-header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title {
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .json-status {
            font-size: 0.85rem;
            padding: 4px 10px;
            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .json-status.valid {
            background-color: rgba(46, 204, 113, 0.3);
            color: #27ae60;
        }
        
        .json-status.invalid {
            background-color: rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }
        
        .json-input {
            flex: 1;
            min-height: 350px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            border: none;
            resize: vertical;
            outline: none;
            white-space: pre;
            overflow-wrap: normal;
            overflow-x: auto;
            tab-size: 2;
        }
        
        .json-input:focus {
            box-shadow: inset 0 0 0 2px #3498db;
        }
        
        .results-section {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .results-header {
            background-color: #9b59b6;
            color: white;
            padding: 15px 20px;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .results-content {
            padding: 20px;
            min-height: 200px;
        }
        
        .diff-item {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 6px;
            background-color: #f8f9fa;
        }
        
        .diff-item.added {
            border-left: 4px solid #27ae60;
        }
        
        .diff-item.removed {
            border-left: 4px solid #e74c3c;
        }
        
        .diff-item.changed {
            border-left: 4px solid #f39c12;
        }
        
        .diff-path {
            font-weight: 600;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
            color: #2c3e50;
        }
        
        .diff-value {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            background-color: white;
            padding: 8px 12px;
            border-radius: 4px;
            margin-top: 5px;
            overflow-x: auto;
        }
        
        .diff-old {
            color: #e74c3c;
            text-decoration: line-through;
        }
        
        .diff-new {
            color: #27ae60;
        }
        
        .no-differences {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .instructions {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
            margin-top: 30px;
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .example-json {
            background-color: #f8f9fa;
            padding: 10px 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 10px;
            overflow-x: auto;
        }
        
        .clipboard-info {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 5px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>JSON Comparator</h1>
            <p class="subtitle">Paste two JSON snippets from clipboard and compare them side-by-side</p>
        </header>
        
        <div class="main-controls">
            <button id="paste1">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"/>
                </svg>
                Paste JSON 1
            </button>
            <button id="paste2">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"/>
                </svg>
                Paste JSON 2
            </button>
            <button id="compareBtn" class="compare">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/>
                </svg>
                Compare JSON
            </button>
            <button id="clearBtn" class="clear">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                </svg>
                Clear All
            </button>
        </div>
        
        <div class="comparison-area">
            <div class="json-section">
                <div class="section-header">
                    <div class="section-title">JSON 1</div>
                    <div id="status1" class="json-status">Empty</div>
                </div>
                <textarea id="json1" class="json-input" placeholder="Paste your first JSON here..."></textarea>
                <div class="clipboard-info">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#7f8c8d">
                        <path d="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"/>
                    </svg>
                    Click "Paste JSON 1" or paste directly (Ctrl+V)
                </div>
            </div>
            
            <div class="json-section">
                <div class="section-header">
                    <div class="section-title">JSON 2</div>
                    <div id="status2" class="json-status">Empty</div>
                </div>
                <textarea id="json2" class="json-input" placeholder="Paste your second JSON here..."></textarea>
                <div class="clipboard-info">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#7f8c8d">
                        <path d="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"/>
                    </svg>
                    Click "Paste JSON 2" or paste directly (Ctrl+V)
                </div>
            </div>
        </div>
        
        <div class="results-section">
            <div class="results-header">Comparison Results</div>
            <div id="resultsContent" class="results-content">
                <div class="no-differences">Paste two JSON objects and click "Compare JSON" to see differences</div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>How to Use This JSON Comparator</h3>
            <ul>
                <li>Click "Paste JSON 1" and "Paste JSON 2" to paste JSON from your clipboard</li>
                <li>You can also paste directly into the text areas (Ctrl+V or Cmd+V)</li>
                <li>Click "Compare JSON" to analyze differences between the two JSON objects</li>
                <li>Differences will be highlighted in the results section below</li>
                <li>Use "Clear All" to reset both JSON inputs and results</li>
            </ul>
            
            <h3>Example JSON Format</h3>
            <div class="example-json">
                {<br>
                &nbsp;&nbsp;"name": "John",<br>
                &nbsp;&nbsp;"age": 30,<br>
                &nbsp;&nbsp;"city": "New York",<br>
                &nbsp;&nbsp;"hobbies": ["reading", "gaming"]<br>
                }
            </div>
        </div>
        
        <footer>
            <p>JSON Comparator Tool &copy; 2023 | All comparisons happen locally in your browser</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const json1Input = document.getElementById('json1');
        const json2Input = document.getElementById('json2');
        const status1 = document.getElementById('status1');
        const status2 = document.getElementById('status2');
        const paste1Btn = document.getElementById('paste1');
        const paste2Btn = document.getElementById('paste2');
        const compareBtn = document.getElementById('compareBtn');
        const clearBtn = document.getElementById('clearBtn');
        const resultsContent = document.getElementById('resultsContent');
        
        // Update status indicators
        function updateStatus(inputElement, statusElement) {
            const text = inputElement.value.trim();
            
            if (text === '') {
                statusElement.textContent = 'Empty';
                statusElement.className = 'json-status';
                return false;
            }
            
            try {
                JSON.parse(text);
                statusElement.textContent = 'Valid JSON';
                statusElement.className = 'json-status valid';
                return true;
            } catch (error) {
                statusElement.textContent = 'Invalid JSON';
                statusElement.className = 'json-status invalid';
                return false;
            }
        }
        
        // Handle paste button click
        async function handlePaste(targetInput, targetStatus) {
            try {
                const text = await navigator.clipboard.readText();
                targetInput.value = text;
                updateStatus(targetInput, targetStatus);
                updateCompareButton();
            } catch (error) {
                alert('Unable to paste from clipboard. Please paste manually (Ctrl+V).');
                console.error('Clipboard read error:', error);
            }
        }
        
        // Update compare button state
        function updateCompareButton() {
            const json1Valid = updateStatus(json1Input, status1);
            const json2Valid = updateStatus(json2Input, status2);
            compareBtn.disabled = !(json1Valid && json2Valid);
        }
        
        // Deep compare two objects and return differences
        function compareObjects(obj1, obj2, path = '') {
            const differences = [];
            
            // Handle null cases
            if (obj1 === null || obj2 === null) {
                if (obj1 !== obj2) {
                    differences.push({
                        path: path || 'root',
                        type: 'changed',
                        oldValue: obj1,
                        newValue: obj2
                    });
                }
                return differences;
            }
            
            // Check if both are objects
            if (typeof obj1 === 'object' && typeof obj2 === 'object') {
                // Get all keys from both objects
                const allKeys = new Set([
                    ...Object.keys(obj1),
                    ...Object.keys(obj2)
                ]);
                
                for (const key of allKeys) {
                    const currentPath = path ? `${path}.${key}` : key;
                    
                    // Key exists in obj1 but not in obj2
                    if (key in obj1 && !(key in obj2)) {
                        differences.push({
                            path: currentPath,
                            type: 'removed',
                            oldValue: obj1[key],
                            newValue: undefined
                        });
                    }
                    // Key exists in obj2 but not in obj1
                    else if (!(key in obj1) && key in obj2) {
                        differences.push({
                            path: currentPath,
                            type: 'added',
                            oldValue: undefined,
                            newValue: obj2[key]
                        });
                    }
                    // Key exists in both objects
                    else {
                        // Recursively compare values
                        const nestedDiffs = compareObjects(obj1[key], obj2[key], currentPath);
                        differences.push(...nestedDiffs);
                    }
                }
            }
            // Primitive values comparison
            else if (obj1 !== obj2) {
                differences.push({
                    path: path || 'root',
                    type: 'changed',
                    oldValue: obj1,
                    newValue: obj2
                });
            }
            
            return differences;
        }
        
        // Display differences in the results section
        function displayDifferences(differences) {
            if (differences.length === 0) {
                resultsContent.innerHTML = `
                    <div class="no-differences">
                        <h3>✅ JSON Objects Are Identical</h3>
                        <p>No differences found between the two JSON objects.</p>
                    </div>
                `;
                return;
            }
            
            let html = `<h3>Found ${differences.length} difference${differences.length !== 1 ? 's' : ''}:</h3>`;
            
            differences.forEach(diff => {
                let diffClass = '';
                let title = '';
                let valueHtml = '';
                
                if (diff.type === 'added') {
                    diffClass = 'added';
                    title = 'Added property';
                    valueHtml = `
                        <div class="diff-value">
                            <span class="diff-new">${formatValue(diff.newValue)}</span>
                        </div>
                    `;
                } else if (diff.type === 'removed') {
                    diffClass = 'removed';
                    title = 'Removed property';
                    valueHtml = `
                        <div class="diff-value">
                            <span class="diff-old">${formatValue(diff.oldValue)}</span>
                        </div>
                    `;
                } else if (diff.type === 'changed') {
                    diffClass = 'changed';
                    title = 'Changed value';
                    valueHtml = `
                        <div class="diff-value">
                            <span class="diff-old">${formatValue(diff.oldValue)}</span> → 
                            <span class="diff-new">${formatValue(diff.newValue)}</span>
                        </div>
                    `;
                }
                
                html += `
                    <div class="diff-item ${diffClass}">
                        <div class="diff-path" title="${title}">${diff.path}</div>
                        ${valueHtml}
                    </div>
                `;
            });
            
            resultsContent.innerHTML = html;
        }
        
        // Format a value for display
        function formatValue(value) {
            if (value === undefined) return 'undefined';
            if (value === null) return 'null';
            if (typeof value === 'object') {
                return JSON.stringify(value, null, 2);
            }
            return String(value);
        }
        
        // Compare the two JSON objects
        function compareJSON() {
            try {
                const obj1 = JSON.parse(json1Input.value);
                const obj2 = JSON.parse(json2Input.value);
                
                const differences = compareObjects(obj1, obj2);
                displayDifferences(differences);
            } catch (error) {
                resultsContent.innerHTML = `
                    <div class="no-differences">
                        <h3>❌ Error Comparing JSON</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Clear all inputs and results
        function clearAll() {
            json1Input.value = '';
            json2Input.value = '';
            status1.textContent = 'Empty';
            status1.className = 'json-status';
            status2.textContent = 'Empty';
            status2.className = 'json-status';
            compareBtn.disabled = true;
            resultsContent.innerHTML = `
                <div class="no-differences">Paste two JSON objects and click "Compare JSON" to see differences</div>
            `;
        }
        
        // Event Listeners
        paste1Btn.addEventListener('click', () => handlePaste(json1Input, status1));
        paste2Btn.addEventListener('click', () => handlePaste(json2Input, status2));
        
        json1Input.addEventListener('input', () => updateCompareButton());
        json2Input.addEventListener('input', () => updateCompareButton());
        
        json1Input.addEventListener('paste', () => {
            // Use setTimeout to allow the paste event to complete
            setTimeout(() => updateCompareButton(), 10);
        });
        
        json2Input.addEventListener('paste', () => {
            setTimeout(() => updateCompareButton(), 10);
        });
        
        compareBtn.addEventListener('click', compareJSON);
        clearBtn.addEventListener('click', clearAll);
        
        // Initialize button state
        updateCompareButton();
        
        // Add sample JSON data for demonstration
        function loadSampleData() {
            const sample1 = {
                "name": "John Doe",
                "age": 30,
                "city": "New York",
                "hobbies": ["reading", "gaming"],
                "job": "Developer"
            };
            
            const sample2 = {
                "name": "John Doe",
                "age": 31,
                "city": "Boston",
                "hobbies": ["reading", "gaming", "hiking"],
                "education": "Master's Degree"
            };
            
            json1Input.value = JSON.stringify(sample1, null, 2);
            json2Input.value = JSON.stringify(sample2, null, 2);
            updateCompareButton();
        }
        
        // Uncomment the line below to load sample data on page load
        // window.addEventListener('DOMContentLoaded', loadSampleData);
    </script>
</body>
</html>